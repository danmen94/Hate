<?php

return <<<'VALUE'
"namespace IPS\\Theme;\nclass class_rules_admin_views extends \\IPS\\Theme\\Template\n{\n\t\t\tfunction actions( $actions ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( $actions ):\n$return .= <<<CONTENT\n\t\n<ul style=\"margin-top:3px\">\n\t\nCONTENT;\n\nforeach ( $actions as $action ):\n$return .= <<<CONTENT\n\n\t<li>\n\t\t<strong>\nCONTENT;\n\n$val = \"{$action->app}_{$action->class}_actions_{$action->key}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong> (\nCONTENT;\n$return .= htmlspecialchars( $action->title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n) \nCONTENT;\n\nif ( ! $action->enabled ):\n$return .= <<<CONTENT\n<span class=\"ipsTree_toggleDisable ipsBadge ipsBadge_negative\">Disabled<\/span>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/li>\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n<\/ul>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction conditions( $conditions ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nif ( $conditions ):\n$return .= <<<CONTENT\n\t\n<ul style=\"margin-top:3px\">\n\t\nCONTENT;\n\nforeach ( $conditions as $condition ):\n$return .= <<<CONTENT\n\n\t<li>\n\t\t\nCONTENT;\n\nif ( $condition->not ):\n$return .= <<<CONTENT\n<span class=\"ipsBadge ipsBadge_warning\">NOT<\/span> \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<strong>\nCONTENT;\n\n$val = \"{$condition->app}_{$condition->class}_conditions_{$condition->key}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, \\IPS\\HTMLENTITIES, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong> (\nCONTENT;\n$return .= htmlspecialchars( $condition->title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n)  \nCONTENT;\n\nif ( ! $condition->enabled ):\n$return .= <<<CONTENT\n<span class=\"ipsTree_toggleDisable ipsBadge ipsBadge_negative\">Disabled<\/span>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\n\t\t\nCONTENT;\n\nif ( $condition->children() ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( $condition->group_compare == 'and' ):\n$return .= <<<CONTENT\n - and ALL subconditions\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n - or ANY subconditions\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"views\", \"rules\" )->conditions( $condition->children() );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/li>\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n<\/ul>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction logdetails( $log, $event, $rule, $conditions, $actions, $subrules ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div class='ipsPad'>\n\n\t<div class='ipsMessage ipsMessage_info' style='margin-right:30px; padding-right:20px;'>Event: <strong>\nCONTENT;\n$return .= htmlspecialchars( $event->title(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/strong> <span style='float:right'>\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\DateTime::ts( $log[ 'time' ] ), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span><\/div>\n\t\n\t<h2 style=\"font-weight:normal; padding:0 15px;\">Rule Overview<\/h2>\n\t<ul>\n\t\t<li>Name: <strong>\nCONTENT;\n\nif ( $rule ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $rule->title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nUnknown (deleted)\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n<\/strong><\/li>\n\t\t<li>Status: <strong>\nCONTENT;\n$return .= htmlspecialchars( $log[ 'message' ], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/strong><\/li>\n\t\t<li>Result: <strong>\nCONTENT;\n$return .= htmlspecialchars( $log[ 'result' ], ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/strong><\/li>\n\t<\/ul>\n\t\n\t<h3 style=\"margin:25px 15px 0;\"><i class=\"fa fa-filter\"><\/i> Conditions<\/h3>\n\t{$conditions}\n\t\n\t<h3 style=\"margin:25px 15px 0;\"><i class=\"fa fa-flash\"><\/i> Actions<\/h3>\n\t{$actions}\n\t\n\t<h3 style=\"margin:25px 15px 0;\"><i class=\"fa fa-gavel\"><\/i> Linked Rules<\/h3>\n\t{$subrules}\n\t\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction rules( $rules, $top=TRUE ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n\nCONTENT;\n\nforeach ( $rules as $rule ):\n$return .= <<<CONTENT\n\n<div class=\"ipsPad\">\n\t<div class=\"ipsCode\" style=\"white-space:normal\">\n\t\t<i class='fa fa-legal'><\/i> \nCONTENT;\n\nif ( $top ):\n$return .= <<<CONTENT\nRule:\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nSubrule:\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n <strong>\nCONTENT;\n$return .= htmlspecialchars( $rule->title, ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/strong> \nCONTENT;\n\nif ( ! $rule->enabled ):\n$return .= <<<CONTENT\n<span class=\"ipsTree_toggleDisable ipsBadge ipsBadge_negative\">Disabled<\/span>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<ul>\n\t\t\t\nCONTENT;\n\nif ( $top ):\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsPad_top'>\n\t\t\t\tEvent: <strong>\nCONTENT;\n$return .= htmlspecialchars( $rule->event()->title(), ENT_QUOTES | \\IPS\\HTMLENTITIES, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/strong>\n\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsPad_top'>\n\t\t\t\tConditions: \nCONTENT;\n\nif ( count($rule->conditions()) > 1  ):\n$return .= <<<CONTENT\n( \nCONTENT;\n\nif ( $rule->base_compare == 'and' ):\n$return .= <<<CONTENT\nmatch all conditions\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nmatch any condition\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n )\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $rule->conditions() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"views\", \"rules\" )->conditions( $rule->conditions() );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t<strong>None<\/strong>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/li>\n\t\t\t<li class='ipsPad_top'>\n\t\t\t\tActions: \n\t\t\t\t\nCONTENT;\n\nif ( $rule->actions( \\IPS\\rules\\ACTION_STANDARD ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"views\", \"rules\" )->actions( $rule->actions( \\IPS\\rules\\ACTION_STANDARD ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t<strong>None<\/strong>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nif ( $rule->actions( \\IPS\\rules\\ACTION_ELSE ) ):\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsPad_top'>\n\t\t\t\tElse Actions: \n\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"views\", \"rules\" )->actions( $rule->actions( \\IPS\\rules\\ACTION_ELSE ) );\n$return .= <<<CONTENT\n\n\t\t\t<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/ul>\n\t\t\nCONTENT;\n\nif ( $rule->children() ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"views\", \"rules\" )->rules( $rule->children(), FALSE );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/div>\n\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\n\t\treturn $return;\n}}"
VALUE;
